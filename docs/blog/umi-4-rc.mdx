# Umi 4 RC Release

Hello everyone, after several months of development, Umi 4 is finally ready to meet you. Compared to the transitions from Umi 2 to 3, the changes from 3 to 4 are huge, and the development time is longer, but we've tried to minimize the impact on developers. With great excitement, let's share the changes with you.

üéâ New Official Website and Documentation<br /> üöÄ MFSU V3 & Enabled by Default<br /> üé≠ Dual Build Engines and ESMi<br /> üï∏ Webpack 5<br /> ‚õπüèæ‚Äç‚ôÇÔ∏è React Router 6 & New Routing System<br /> üêπ Improved Best Practices<br /> üõ°Ô∏è Pre-bundling Dependencies<br /> ü§∫ Umi Max<br /> üêõ Low Import Development Mode<br /> ‚ö†Ô∏è Strong Constraint Feature Integration<br /> üéà Import All From Umi Evolution<br /> üçÄ srcTranspiler and depTranspiler<br /> üåº jsMinifier and cssMinifier<br /> üå∏ Application Metadata<br /> ‚ùÑÔ∏è Micro Generator<br /> üß™ Thoughtful Enhancements<br />

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>New Official Website and Documentation.</span>
  The image below shows the homepage of the new official website, including restructured documentation, information architecture, and newly written documentation plugins. Currently, it includes basic configurations, APIs, upgrades, quick start guides, and other foundational documents. The remaining documentation is still being written diligently. One change is that the documentation for plugins has been integrated into the Umi official website as part of Umi Max, eliminating the need for redirection.
</p>

![](https://img.alicdn.com/imgextra/i1/O1CN014dDq4L1Zc3guRwcse_!!6000000003214-2-tps-1600-941.png)

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>MFSU V3 & Enabled by Default.</span>
  MFSU has released its third major version. If you encountered issues with the built-in MFSU in Umi 3, it is recommended to give it a try again. This version comes with many improvements, addressing almost all the quirky issues that you might have encountered previously. It also provides faster compilation and page loading speeds. Just yesterday, I even wrote an article about
  ["MFSU Faster than Vite"](https://mp.weixin.qq.com/s?__biz=MjM5NDgyODI4MQ==&mid=2247484624&idx=1&sn=2addfa8cc2511fbea91faf831195788f). Based on this, we are confident to enable this feature by default in Umi 4. Additionally, it's worth mentioning that MFSU can run independently of Umi.
</p>

![](https://img.alicdn.com/imgextra/i2/O1CN01Znj8HD1mCwz72voXv_!!6000000004919-2-tps-1600-807.png)

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>Dual Build Engines and ESMi.</span>
  Umi 4 offers two build modes for developers to choose from: Vite and Webpack. We strive to ensure their functionality consistency as much as possible. Some developers might prefer using Vite for development and Webpack for building. Moreover, based on the Vite mode, we've implemented ESMi on the client side. ESMi requires server-side support and is not yet available on the public internet.
</p>

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>Webpack 5.</span> Umi 4
  defaults to using Webpack 5 and enables physical caching.
</p>

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>
    React Router 6 & New Routing System.
  </span>
  Umi 4's routing is built on React Router 6, a version I personally favor due to its consideration of configuration-based routing scenarios, which aligns with Remix's principles. This version allowed for a significant reduction in routing-related code compared to Umi 3. Furthermore, based on this, a new routing structure has been designed to facilitate expansion and handling of conventional routing requests in the future.
</p>

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>Improved Best Practices.</span>
  We have rewritten, upgraded, and integrated plugins from the umijs/plugins repository into the main repository. This step was taken to improve top-level design and ensure greater consistency in style among official plugins.
</p>

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>Dependency Pre-bundling.</span>
  For enterprises, security and stability are crucial. With the recent buzz around colors and faker.js in the community, no one wants to wake up and find their responsible business down due to an issue. Following Umi 3, Umi 4 continues to work on pre-bundling dependencies, going even further by locking down not only node-side dependencies but also certain runtime dependencies, such as core-js and @babel/runtime.
</p>

![](https://img.alicdn.com/imgextra/i1/O1CN01h44iJg1T09DNuYOlm_!!6000000002319-2-tps-1600-758.png)

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>Umi Max.</span> Umi Max
  is the external version of our internal Bigfish framework. It addresses our own issues and provides another centralized framework option for the community.
</p>

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>
    Low Import Development Mode.
  </span>
  This is one of Umi 4's experimental features, already completed. It addresses the issue of minimizing or eliminating the need for developers to write import statements. Many imports in projects can be automatically managed through engineering. In Umi 4, by enabling lowImport:{' '}
  {}, you can directly use route-related elements like Link and useLocation, data flow-related components like connect and useModel, Ant Design components like Button and Calendar, and more, without the need for imports.
</p>

![](https://img.alicdn.com/imgextra/i4/O1CN0142Vcpt25kMZqjmioe_!!6000000007564-2-tps-1600-631.png)

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>Strong Constraint Feature Integration.</span> Umi
  4 provides APIs that make strong constraints and code validation easy. These APIs include
  api.onCheck, api.onCheckConfig, api.onCheckPkgJSON, and
  api.onCheckCode. As the names suggest, they are used for checking and controlling dependencies, configuration, package.json, tsconfig.json, npmClient, code, and other aspects. These are suitable for team-based development.
</p>

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>
    Import All From Umi Evolution.
  </span>
  This was a feature introduced in Umi 3 two years ago. Recently, similar implementations have been seen in frameworks and tools like Remix, prisma, and vitekit. This approach has its pros and cons. The advantage is that Umi manages a large number of dependencies, reducing the need for manual installation. The downside is that it's more of a black box and somewhat hacky. Umi 4 cannot eliminate the black box issue, but it has addressed the hackiness, making the implementation side-effect-free and seamlessly integratable with solutions like Vite and MFSU.
</p>

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>
    srcTranspiler and depTranspiler.
  </span>
  More options are provided for source code and dependency compilation. Options for source code compilation include babel, swc, and esbuild. There's no silver bullet, and the appropriate choice depends on the context. For example, swc conflicts with top-level await and MFSU due to patching issues, but it's suitable for building as it's compatible with es7. On the other hand, esbuild is suitable for development due to its speed. In terms of data, taking the ant-design-pro project as an example, esbuild is around 3 seconds faster than babel for source code compilation on an M1 2020 MacBook without cache.
</p>

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>
    jsMinifier and cssMinifier.
  </span>
  Umi 4 defaults to using esbuild for js and css compression due to its speed. More options are also provided. For js compression, swc, terser, and uglifyJs are supported, while css compression supports cssnano.
</p>

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>Application Metadata.</span> Umi 4
  collects various project data through api.appData, including configurations, routes, package.json, tsconfig.json, npmClient, data flow, internationalization, versions of antd, react, and react-dom used, and more. This is extremely useful for plugin developers and scenarios requiring statistics.
</p>

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>Micro Generator.</span> Yes, it's the micro generator from modern.js, which was inspired by modern.js and retains its name. For example, features like prettier may not be needed in every project, making it suitable for the micro generator. You can enable it as needed, add configurations, and install dependencies.
</p>

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>Thoughtful Enhancements.</span>
  There are many thoughtful enhancements as well. Here are two examples: 1. In projects, adding plugin.ts will automatically be treated as a plugin, making it convenient for project-level extensions; 2. When debugging issues, you often need to modify compiled code to check if you've made the right changes. If you download umi.js and place it in the project's root directory, Umi will prioritize using this code.
</p>

The above are the new features in Umi 4 so far.

In addition to these, there are other plans to be completed before the official release. This includes <span style={{color:'red'}}>api route, umi server and adapter, route loader, stable lint, more commands, component development with father 4, and documentation tool dumi 2</span>, which will be introduced in subsequent RC versions.

Feel free to give Umi 4 a try! The official documentation includes an upgrade guide from Umi 3 to 4 for ant-design-pro. During the RC phase, we've also prepared a <span style={{color:'red',fontWeight:'bold'}}>WeChat group for step-by-step upgrades</span>, welcoming pioneers of Umi 4 to join. We wish you a smooth upgrade and an early happy New Year üß®, auspicious year of the üêØ.

<p>
  <img
    src="https://img.alicdn.com/imgextra/i4/O1CN01QmMTeR1jd6l2cwHQh_!!6000000004570-0-tps-1170-1500.jpg"
    width="300"
  />
</p>
