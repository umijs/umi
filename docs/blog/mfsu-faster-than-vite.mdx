# Faster than Vite: MFSU in Umi 4

<p style={{ color: 'blue' }}>
  Editor's Note: Change the code, don't Workaround! If Webpack is slow, fix it. With proper optimization, even Bundle can be fast. This approach will be enabled by default in Umi 4, suitable for those who want both Webpack functionality and ecosystem and Vite speed.
</p>

Umi 4 supports both Webpack and Vite as two different build options. After setting them up and getting them running, there was an eagerness to compare the performance of Vite with that of Webpack + MFSU. The results were a bit surprising. You can find a detailed introduction to what MFSU is in my article [《SEE Conf: Umi 4 Design Concepts》](https://mp.weixin.qq.com/s?__biz=MjM5NDgyODI4MQ%3D%3D&mid=2247484533&idx=1&sn=9b15a67b88ebc95476fce1798eb49146).

<p>
  <span style={{ color: 'red', fontWeight: 'bold' }}>
    Two Examples, Four Modes, Four Dimensions of Comparison.
  </span>
  The two examples are a large-scale full ant-design-pro project and a small libs example. The four modes are Webpack, Webpack + MFSU, Webpack + MFSU with esbuild mode, and Vite in Umi. The four dimensions of comparison are cold start without cache, hot start with cache, hot update after code change, and page opening speed.
</p>

Let's discuss a few points related to statistics. All the mentioned Webpack-related modes have physical caching enabled. The integrated Vite in Umi is based on Vite but with concerns about possible misuse by Umi, which has been largely ruled out by developers. A significant amount of time was spent on pre-compiling dependencies. The use of LESS in Ant Design Pro affects the acceleration achieved by esbuild, but this should be fair across different modes. The data in the following graphs is the average of five runs after restarting the computer using a 13-inch M1 2022 model. The hot update speed of Vite was not measured due to the nature of ES modules; it only concludes when the request is handled, making it very fast.

Let's directly dive into the results. Those who are interested in manual verification can navigate to different example directories in the umijs/umi repository and run `npm run dev` to verify.

![](https://img.alicdn.com/imgextra/i4/O1CN01Gz9AA81szqy3BbRfK_!!6000000005838-2-tps-2150-1084.png)

<p style={{ color: 'gray', marginTop: 0, textAlign: 'center' }}>
  Figure: Speed comparison graph for the full ant-design-pro project
</p>

![](https://img.alicdn.com/imgextra/i1/O1CN01HNfH7l23L3SRjJUka_!!6000000007238-2-tps-2058-1078.png)

<p style={{ color: 'gray', marginTop: 0, textAlign: 'center' }}>
  Figure: Speed comparison graph for the libs example
</p>

As can be seen, <span style={{color:'red',fontWeight:'bold'}}>in these scenarios, MFSU with esbuild data is leading.</span> The page opening speed of all four modes is nearly the same, so the comparison data is not listed in the graphs. This was also an unexpected finding, as I initially thought that more requests in Vite might slow down the page opening speed. It's also possible that the project might not be complex enough?