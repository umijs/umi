(function(){var e={430:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};const r=n(361);const o=s(n(234));const i=s(n(699));const a=o.default("agent-base");function isAgent(e){return Boolean(e)&&typeof e.addRequest==="function"}function isSecureEndpoint(){const{stack:e}=new Error;if(typeof e!=="string")return false;return e.split("\n").some((e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1))}function createAgent(e,t){return new createAgent.Agent(e,t)}(function(e){class Agent extends r.EventEmitter{constructor(e,t){super();let n=t;if(typeof e==="function"){this.callback=e}else if(e){n=e}this.timeout=null;if(n&&typeof n.timeout==="number"){this.timeout=n.timeout}this.maxFreeSockets=1;this.maxSockets=1;this.maxTotalSockets=Infinity;this.sockets={};this.freeSockets={};this.requests={};this.options={}}get defaultPort(){if(typeof this.explicitDefaultPort==="number"){return this.explicitDefaultPort}return isSecureEndpoint()?443:80}set defaultPort(e){this.explicitDefaultPort=e}get protocol(){if(typeof this.explicitProtocol==="string"){return this.explicitProtocol}return isSecureEndpoint()?"https:":"http:"}set protocol(e){this.explicitProtocol=e}callback(e,t,n){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(e,t){const n=Object.assign({},t);if(typeof n.secureEndpoint!=="boolean"){n.secureEndpoint=isSecureEndpoint()}if(n.host==null){n.host="localhost"}if(n.port==null){n.port=n.secureEndpoint?443:80}if(n.protocol==null){n.protocol=n.secureEndpoint?"https:":"http:"}if(n.host&&n.path){delete n.path}delete n.agent;delete n.hostname;delete n._defaultAgent;delete n.defaultPort;delete n.createConnection;e._last=true;e.shouldKeepAlive=false;let s=false;let r=null;const o=n.timeout||this.timeout;const onerror=t=>{if(e._hadError)return;e.emit("error",t);e._hadError=true};const ontimeout=()=>{r=null;s=true;const e=new Error(`A "socket" was not created for HTTP request before ${o}ms`);e.code="ETIMEOUT";onerror(e)};const callbackError=e=>{if(s)return;if(r!==null){clearTimeout(r);r=null}onerror(e)};const onsocket=t=>{if(s)return;if(r!=null){clearTimeout(r);r=null}if(isAgent(t)){a("Callback returned another Agent instance %o",t.constructor.name);t.addRequest(e,n);return}if(t){t.once("free",(()=>{this.freeSocket(t,n)}));e.onSocket(t);return}const o=new Error(`no Duplex stream was returned to agent-base for \`${e.method} ${e.path}\``);onerror(o)};if(typeof this.callback!=="function"){onerror(new Error("`callback` is not defined"));return}if(!this.promisifiedCallback){if(this.callback.length>=3){a("Converting legacy callback function to promise");this.promisifiedCallback=i.default(this.callback)}else{this.promisifiedCallback=this.callback}}if(typeof o==="number"&&o>0){r=setTimeout(ontimeout,o)}if("port"in n&&typeof n.port!=="number"){n.port=Number(n.port)}try{a("Resolving socket for %o request: %o",n.protocol,`${e.method} ${e.path}`);Promise.resolve(this.promisifiedCallback(e,n)).then(onsocket,callbackError)}catch(e){Promise.reject(e).catch(callbackError)}}freeSocket(e,t){a("Freeing socket %o %o",e.constructor.name,t);e.destroy()}destroy(){a("Destroying agent %o",this.constructor.name)}}e.Agent=Agent;e.prototype=e.Agent.prototype})(createAgent||(createAgent={}));e.exports=createAgent},699:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});function promisify(e){return function(t,n){return new Promise(((s,r)=>{e.call(this,t,n,((e,t)=>{if(e){r(e)}else{s(t)}}))}))}}t["default"]=promisify},741:function(e,t,n){t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.storage=localstorage();t.destroy=(()=>{let e=false;return()=>{if(!e){e=true;console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}}})();t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){if(typeof window!=="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)){return true}if(typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)){return false}return typeof document!=="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!=="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!=="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(t){t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff);if(!this.useColors){return}const n="color: "+this.color;t.splice(1,0,n,"color: inherit");let s=0;let r=0;t[0].replace(/%[a-zA-Z%]/g,(e=>{if(e==="%%"){return}s++;if(e==="%c"){r=s}}));t.splice(r,0,n)}t.log=console.debug||console.log||(()=>{});function save(e){try{if(e){t.storage.setItem("debug",e)}else{t.storage.removeItem("debug")}}catch(e){}}function load(){let e;try{e=t.storage.getItem("debug")}catch(e){}if(!e&&typeof process!=="undefined"&&"env"in process){e=process.env.DEBUG}return e}function localstorage(){try{return localStorage}catch(e){}}e.exports=n(993)(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}},993:function(e,t,n){function setup(e){createDebug.debug=createDebug;createDebug.default=createDebug;createDebug.coerce=coerce;createDebug.disable=disable;createDebug.enable=enable;createDebug.enabled=enabled;createDebug.humanize=n(257);createDebug.destroy=destroy;Object.keys(e).forEach((t=>{createDebug[t]=e[t]}));createDebug.names=[];createDebug.skips=[];createDebug.formatters={};function selectColor(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n);t|=0}return createDebug.colors[Math.abs(t)%createDebug.colors.length]}createDebug.selectColor=selectColor;function createDebug(e){let t;let n=null;let s;let r;function debug(...e){if(!debug.enabled){return}const n=debug;const s=Number(new Date);const r=s-(t||s);n.diff=r;n.prev=t;n.curr=s;t=s;e[0]=createDebug.coerce(e[0]);if(typeof e[0]!=="string"){e.unshift("%O")}let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,s)=>{if(t==="%%"){return"%"}o++;const r=createDebug.formatters[s];if(typeof r==="function"){const s=e[o];t=r.call(n,s);e.splice(o,1);o--}return t}));createDebug.formatArgs.call(n,e);const i=n.log||createDebug.log;i.apply(n,e)}debug.namespace=e;debug.useColors=createDebug.useColors();debug.color=createDebug.selectColor(e);debug.extend=extend;debug.destroy=createDebug.destroy;Object.defineProperty(debug,"enabled",{enumerable:true,configurable:false,get:()=>{if(n!==null){return n}if(s!==createDebug.namespaces){s=createDebug.namespaces;r=createDebug.enabled(e)}return r},set:e=>{n=e}});if(typeof createDebug.init==="function"){createDebug.init(debug)}return debug}function extend(e,t){const n=createDebug(this.namespace+(typeof t==="undefined"?":":t)+e);n.log=this.log;return n}function enable(e){createDebug.save(e);createDebug.namespaces=e;createDebug.names=[];createDebug.skips=[];let t;const n=(typeof e==="string"?e:"").split(/[\s,]+/);const s=n.length;for(t=0;t<s;t++){if(!n[t]){continue}e=n[t].replace(/\*/g,".*?");if(e[0]==="-"){createDebug.skips.push(new RegExp("^"+e.slice(1)+"$"))}else{createDebug.names.push(new RegExp("^"+e+"$"))}}}function disable(){const e=[...createDebug.names.map(toNamespace),...createDebug.skips.map(toNamespace).map((e=>"-"+e))].join(",");createDebug.enable("");return e}function enabled(e){if(e[e.length-1]==="*"){return true}let t;let n;for(t=0,n=createDebug.skips.length;t<n;t++){if(createDebug.skips[t].test(e)){return false}}for(t=0,n=createDebug.names.length;t<n;t++){if(createDebug.names[t].test(e)){return true}}return false}function toNamespace(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function coerce(e){if(e instanceof Error){return e.stack||e.message}return e}function destroy(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}createDebug.enable(createDebug.load());return createDebug}e.exports=setup},234:function(e,t,n){if(typeof process==="undefined"||process.type==="renderer"||process.browser===true||process.__nwjs){e.exports=n(741)}else{e.exports=n(718)}},718:function(e,t,n){const s=n(224);const r=n(837);t.init=init;t.log=log;t.formatArgs=formatArgs;t.save=save;t.load=load;t.useColors=useColors;t.destroy=r.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");t.colors=[6,2,3,4,5,1];try{const e=n(575);if(e&&(e.stderr||e).level>=2){t.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221]}}catch(e){}t.inspectOpts=Object.keys(process.env).filter((e=>/^debug_/i.test(e))).reduce(((e,t)=>{const n=t.substring(6).toLowerCase().replace(/_([a-z])/g,((e,t)=>t.toUpperCase()));let s=process.env[t];if(/^(yes|on|true|enabled)$/i.test(s)){s=true}else if(/^(no|off|false|disabled)$/i.test(s)){s=false}else if(s==="null"){s=null}else{s=Number(s)}e[n]=s;return e}),{});function useColors(){return"colors"in t.inspectOpts?Boolean(t.inspectOpts.colors):s.isatty(process.stderr.fd)}function formatArgs(t){const{namespace:n,useColors:s}=this;if(s){const s=this.color;const r="[3"+(s<8?s:"8;5;"+s);const o=`  ${r};1m${n} [0m`;t[0]=o+t[0].split("\n").join("\n"+o);t.push(r+"m+"+e.exports.humanize(this.diff)+"[0m")}else{t[0]=getDate()+n+" "+t[0]}}function getDate(){if(t.inspectOpts.hideDate){return""}return(new Date).toISOString()+" "}function log(...e){return process.stderr.write(r.format(...e)+"\n")}function save(e){if(e){process.env.DEBUG=e}else{delete process.env.DEBUG}}function load(){return process.env.DEBUG}function init(e){e.inspectOpts={};const n=Object.keys(t.inspectOpts);for(let s=0;s<n.length;s++){e.inspectOpts[n[s]]=t.inspectOpts[n[s]]}}e.exports=n(993)(t);const{formatters:o}=e.exports;o.o=function(e){this.inspectOpts.colors=this.useColors;return r.inspect(e,this.inspectOpts).split("\n").map((e=>e.trim())).join(" ")};o.O=function(e){this.inspectOpts.colors=this.useColors;return r.inspect(e,this.inspectOpts)}},592:function(e){"use strict";e.exports=(e,t=process.argv)=>{const n=e.startsWith("-")?"":e.length===1?"-":"--";const s=t.indexOf(n+e);const r=t.indexOf("--");return s!==-1&&(r===-1||s<r)}},460:function(e,t,n){const s=t;const{Buffer:r}=n(300);const o=n(37);s.toBuffer=function(e,t,n){n=~~n;let s;if(this.isV4Format(e)){s=t||r.alloc(n+4);e.split(/\./g).map((e=>{s[n++]=parseInt(e,10)&255}))}else if(this.isV6Format(e)){const o=e.split(":",8);let i;for(i=0;i<o.length;i++){const e=this.isV4Format(o[i]);let t;if(e){t=this.toBuffer(o[i]);o[i]=t.slice(0,2).toString("hex")}if(t&&++i<8){o.splice(i,0,t.slice(2,4).toString("hex"))}}if(o[0]===""){while(o.length<8)o.unshift("0")}else if(o[o.length-1]===""){while(o.length<8)o.push("0")}else if(o.length<8){for(i=0;i<o.length&&o[i]!=="";i++);const e=[i,1];for(i=9-o.length;i>0;i--){e.push("0")}o.splice(...e)}s=t||r.alloc(n+16);for(i=0;i<o.length;i++){const e=parseInt(o[i],16);s[n++]=e>>8&255;s[n++]=e&255}}if(!s){throw Error(`Invalid ip address: ${e}`)}return s};s.toString=function(e,t,n){t=~~t;n=n||e.length-t;let s=[];if(n===4){for(let r=0;r<n;r++){s.push(e[t+r])}s=s.join(".")}else if(n===16){for(let r=0;r<n;r+=2){s.push(e.readUInt16BE(t+r).toString(16))}s=s.join(":");s=s.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3");s=s.replace(/:{3,4}/,"::")}return s};const i=/^(\d{1,3}\.){3,3}\d{1,3}$/;const a=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i;s.isV4Format=function(e){return i.test(e)};s.isV6Format=function(e){return a.test(e)};function _normalizeFamily(e){if(e===4){return"ipv4"}if(e===6){return"ipv6"}return e?e.toLowerCase():"ipv4"}s.fromPrefixLen=function(e,t){if(e>32){t="ipv6"}else{t=_normalizeFamily(t)}let n=4;if(t==="ipv6"){n=16}const o=r.alloc(n);for(let t=0,n=o.length;t<n;++t){let n=8;if(e<8){n=e}e-=n;o[t]=~(255>>n)&255}return s.toString(o)};s.mask=function(e,t){e=s.toBuffer(e);t=s.toBuffer(t);const n=r.alloc(Math.max(e.length,t.length));let o;if(e.length===t.length){for(o=0;o<e.length;o++){n[o]=e[o]&t[o]}}else if(t.length===4){for(o=0;o<t.length;o++){n[o]=e[e.length-4+o]&t[o]}}else{for(o=0;o<n.length-6;o++){n[o]=0}n[10]=255;n[11]=255;for(o=0;o<e.length;o++){n[o+12]=e[o]&t[o+12]}o+=12}for(;o<n.length;o++){n[o]=0}return s.toString(n)};s.cidr=function(e){const t=e.split("/");const n=t[0];if(t.length!==2){throw new Error(`invalid CIDR subnet: ${n}`)}const r=s.fromPrefixLen(parseInt(t[1],10));return s.mask(n,r)};s.subnet=function(e,t){const n=s.toLong(s.mask(e,t));const r=s.toBuffer(t);let o=0;for(let e=0;e<r.length;e++){if(r[e]===255){o+=8}else{let t=r[e]&255;while(t){t=t<<1&255;o++}}}const i=2**(32-o);return{networkAddress:s.fromLong(n),firstAddress:i<=2?s.fromLong(n):s.fromLong(n+1),lastAddress:i<=2?s.fromLong(n+i-1):s.fromLong(n+i-2),broadcastAddress:s.fromLong(n+i-1),subnetMask:t,subnetMaskLength:o,numHosts:i<=2?i:i-2,length:i,contains(e){return n===s.toLong(s.mask(e,t))}}};s.cidrSubnet=function(e){const t=e.split("/");const n=t[0];if(t.length!==2){throw new Error(`invalid CIDR subnet: ${n}`)}const r=s.fromPrefixLen(parseInt(t[1],10));return s.subnet(n,r)};s.not=function(e){const t=s.toBuffer(e);for(let e=0;e<t.length;e++){t[e]=255^t[e]}return s.toString(t)};s.or=function(e,t){e=s.toBuffer(e);t=s.toBuffer(t);if(e.length===t.length){for(let n=0;n<e.length;++n){e[n]|=t[n]}return s.toString(e)}let n=e;let r=t;if(t.length>e.length){n=t;r=e}const o=n.length-r.length;for(let e=o;e<n.length;++e){n[e]|=r[e-o]}return s.toString(n)};s.isEqual=function(e,t){e=s.toBuffer(e);t=s.toBuffer(t);if(e.length===t.length){for(let n=0;n<e.length;n++){if(e[n]!==t[n])return false}return true}if(t.length===4){const n=t;t=e;e=n}for(let e=0;e<10;e++){if(t[e]!==0)return false}const n=t.readUInt16BE(10);if(n!==0&&n!==65535)return false;for(let n=0;n<4;n++){if(e[n]!==t[n+12])return false}return true};s.isPrivate=function(e){return/^(::f{4}:)?10\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?192\.168\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?172\.(1[6-9]|2\d|30|31)\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^(::f{4}:)?169\.254\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^f[cd][0-9a-f]{2}:/i.test(e)||/^fe80:/i.test(e)||/^::1$/.test(e)||/^::$/.test(e)};s.isPublic=function(e){return!s.isPrivate(e)};s.isLoopback=function(e){return/^(::f{4}:)?127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})/.test(e)||/^fe80::1$/.test(e)||/^::1$/.test(e)||/^::$/.test(e)};s.loopback=function(e){e=_normalizeFamily(e);if(e!=="ipv4"&&e!=="ipv6"){throw new Error("family must be ipv4 or ipv6")}return e==="ipv4"?"127.0.0.1":"fe80::1"};s.address=function(e,t){const n=o.networkInterfaces();t=_normalizeFamily(t);if(e&&e!=="private"&&e!=="public"){const s=n[e].filter((e=>{const n=_normalizeFamily(e.family);return n===t}));if(s.length===0){return undefined}return s[0].address}const r=Object.keys(n).map((r=>{const o=n[r].filter((n=>{n.family=_normalizeFamily(n.family);if(n.family!==t||s.isLoopback(n.address)){return false}if(!e){return true}return e==="public"?s.isPrivate(n.address):s.isPublic(n.address)}));return o.length?o[0].address:undefined})).filter(Boolean);return!r.length?s.loopback(t):r[0]};s.toLong=function(e){let t=0;e.split(".").forEach((e=>{t<<=8;t+=parseInt(e)}));return t>>>0};s.fromLong=function(e){return`${e>>>24}.${e>>16&255}.${e>>8&255}.${e&255}`}},257:function(e){var t=1e3;var n=t*60;var s=n*60;var r=s*24;var o=r*7;var i=r*365.25;e.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0){return parse(e)}else if(n==="number"&&isFinite(e)){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!a){return}var c=parseFloat(a[1]);var u=(a[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return c*i;case"weeks":case"week":case"w":return c*o;case"days":case"day":case"d":return c*r;case"hours":case"hour":case"hrs":case"hr":case"h":return c*s;case"minutes":case"minute":case"mins":case"min":case"m":return c*n;case"seconds":case"second":case"secs":case"sec":case"s":return c*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return undefined}}function fmtShort(e){var o=Math.abs(e);if(o>=r){return Math.round(e/r)+"d"}if(o>=s){return Math.round(e/s)+"h"}if(o>=n){return Math.round(e/n)+"m"}if(o>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){var o=Math.abs(e);if(o>=r){return plural(e,o,r,"day")}if(o>=s){return plural(e,o,s,"hour")}if(o>=n){return plural(e,o,n,"minute")}if(o>=t){return plural(e,o,t,"second")}return e+" ms"}function plural(e,t,n,s){var r=t>=n*1.5;return Math.round(e/n)+" "+s+(r?"s":"")}},75:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const s=n(496);const r=4096;const o="utf8";class SmartBuffer{constructor(e){this.length=0;this._encoding=o;this._writeOffset=0;this._readOffset=0;if(SmartBuffer.isSmartBufferOptions(e)){if(e.encoding){s.checkEncoding(e.encoding);this._encoding=e.encoding}if(e.size){if(s.isFiniteInteger(e.size)&&e.size>0){this._buff=Buffer.allocUnsafe(e.size)}else{throw new Error(s.ERRORS.INVALID_SMARTBUFFER_SIZE)}}else if(e.buff){if(Buffer.isBuffer(e.buff)){this._buff=e.buff;this.length=e.buff.length}else{throw new Error(s.ERRORS.INVALID_SMARTBUFFER_BUFFER)}}else{this._buff=Buffer.allocUnsafe(r)}}else{if(typeof e!=="undefined"){throw new Error(s.ERRORS.INVALID_SMARTBUFFER_OBJECT)}this._buff=Buffer.allocUnsafe(r)}}static fromSize(e,t){return new this({size:e,encoding:t})}static fromBuffer(e,t){return new this({buff:e,encoding:t})}static fromOptions(e){return new this(e)}static isSmartBufferOptions(e){const t=e;return t&&(t.encoding!==undefined||t.size!==undefined||t.buff!==undefined)}readInt8(e){return this._readNumberValue(Buffer.prototype.readInt8,1,e)}readInt16BE(e){return this._readNumberValue(Buffer.prototype.readInt16BE,2,e)}readInt16LE(e){return this._readNumberValue(Buffer.prototype.readInt16LE,2,e)}readInt32BE(e){return this._readNumberValue(Buffer.prototype.readInt32BE,4,e)}readInt32LE(e){return this._readNumberValue(Buffer.prototype.readInt32LE,4,e)}readBigInt64BE(e){s.bigIntAndBufferInt64Check("readBigInt64BE");return this._readNumberValue(Buffer.prototype.readBigInt64BE,8,e)}readBigInt64LE(e){s.bigIntAndBufferInt64Check("readBigInt64LE");return this._readNumberValue(Buffer.prototype.readBigInt64LE,8,e)}writeInt8(e,t){this._writeNumberValue(Buffer.prototype.writeInt8,1,e,t);return this}insertInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeInt8,1,e,t)}writeInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}insertInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,e,t)}writeInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}insertInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,e,t)}writeInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}insertInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,e,t)}writeInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}insertInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,e,t)}writeBigInt64BE(e,t){s.bigIntAndBufferInt64Check("writeBigInt64BE");return this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,e,t)}insertBigInt64BE(e,t){s.bigIntAndBufferInt64Check("writeBigInt64BE");return this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,e,t)}writeBigInt64LE(e,t){s.bigIntAndBufferInt64Check("writeBigInt64LE");return this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,e,t)}insertBigInt64LE(e,t){s.bigIntAndBufferInt64Check("writeBigInt64LE");return this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,e,t)}readUInt8(e){return this._readNumberValue(Buffer.prototype.readUInt8,1,e)}readUInt16BE(e){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,e)}readUInt16LE(e){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,e)}readUInt32BE(e){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,e)}readUInt32LE(e){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,e)}readBigUInt64BE(e){s.bigIntAndBufferInt64Check("readBigUInt64BE");return this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,e)}readBigUInt64LE(e){s.bigIntAndBufferInt64Check("readBigUInt64LE");return this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,e)}writeUInt8(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,e,t)}insertUInt8(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,e,t)}writeUInt16BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}insertUInt16BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,e,t)}writeUInt16LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}insertUInt16LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,e,t)}writeUInt32BE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}insertUInt32BE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,e,t)}writeUInt32LE(e,t){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}insertUInt32LE(e,t){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,e,t)}writeBigUInt64BE(e,t){s.bigIntAndBufferInt64Check("writeBigUInt64BE");return this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,t)}insertBigUInt64BE(e,t){s.bigIntAndBufferInt64Check("writeBigUInt64BE");return this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,t)}writeBigUInt64LE(e,t){s.bigIntAndBufferInt64Check("writeBigUInt64LE");return this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,t)}insertBigUInt64LE(e,t){s.bigIntAndBufferInt64Check("writeBigUInt64LE");return this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,t)}readFloatBE(e){return this._readNumberValue(Buffer.prototype.readFloatBE,4,e)}readFloatLE(e){return this._readNumberValue(Buffer.prototype.readFloatLE,4,e)}writeFloatBE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}insertFloatBE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,e,t)}writeFloatLE(e,t){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}insertFloatLE(e,t){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,e,t)}readDoubleBE(e){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,e)}readDoubleLE(e){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,e)}writeDoubleBE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}insertDoubleBE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,e,t)}writeDoubleLE(e,t){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}insertDoubleLE(e,t){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,e,t)}readString(e,t){let n;if(typeof e==="number"){s.checkLengthValue(e);n=Math.min(e,this.length-this._readOffset)}else{t=e;n=this.length-this._readOffset}if(typeof t!=="undefined"){s.checkEncoding(t)}const r=this._buff.slice(this._readOffset,this._readOffset+n).toString(t||this._encoding);this._readOffset+=n;return r}insertString(e,t,n){s.checkOffsetValue(t);return this._handleString(e,true,t,n)}writeString(e,t,n){return this._handleString(e,false,t,n)}readStringNT(e){if(typeof e!=="undefined"){s.checkEncoding(e)}let t=this.length;for(let e=this._readOffset;e<this.length;e++){if(this._buff[e]===0){t=e;break}}const n=this._buff.slice(this._readOffset,t);this._readOffset=t+1;return n.toString(e||this._encoding)}insertStringNT(e,t,n){s.checkOffsetValue(t);this.insertString(e,t,n);this.insertUInt8(0,t+e.length);return this}writeStringNT(e,t,n){this.writeString(e,t,n);this.writeUInt8(0,typeof t==="number"?t+e.length:this.writeOffset);return this}readBuffer(e){if(typeof e!=="undefined"){s.checkLengthValue(e)}const t=typeof e==="number"?e:this.length;const n=Math.min(this.length,this._readOffset+t);const r=this._buff.slice(this._readOffset,n);this._readOffset=n;return r}insertBuffer(e,t){s.checkOffsetValue(t);return this._handleBuffer(e,true,t)}writeBuffer(e,t){return this._handleBuffer(e,false,t)}readBufferNT(){let e=this.length;for(let t=this._readOffset;t<this.length;t++){if(this._buff[t]===0){e=t;break}}const t=this._buff.slice(this._readOffset,e);this._readOffset=e+1;return t}insertBufferNT(e,t){s.checkOffsetValue(t);this.insertBuffer(e,t);this.insertUInt8(0,t+e.length);return this}writeBufferNT(e,t){if(typeof t!=="undefined"){s.checkOffsetValue(t)}this.writeBuffer(e,t);this.writeUInt8(0,typeof t==="number"?t+e.length:this._writeOffset);return this}clear(){this._writeOffset=0;this._readOffset=0;this.length=0;return this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(e){s.checkOffsetValue(e);s.checkTargetOffset(e,this);this._readOffset=e}get writeOffset(){return this._writeOffset}set writeOffset(e){s.checkOffsetValue(e);s.checkTargetOffset(e,this);this._writeOffset=e}get encoding(){return this._encoding}set encoding(e){s.checkEncoding(e);this._encoding=e}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(e){const t=typeof e==="string"?e:this._encoding;s.checkEncoding(t);return this._buff.toString(t,0,this.length)}destroy(){this.clear();return this}_handleString(e,t,n,r){let o=this._writeOffset;let i=this._encoding;if(typeof n==="number"){o=n}else if(typeof n==="string"){s.checkEncoding(n);i=n}if(typeof r==="string"){s.checkEncoding(r);i=r}const a=Buffer.byteLength(e,i);if(t){this.ensureInsertable(a,o)}else{this._ensureWriteable(a,o)}this._buff.write(e,o,a,i);if(t){this._writeOffset+=a}else{if(typeof n==="number"){this._writeOffset=Math.max(this._writeOffset,o+a)}else{this._writeOffset+=a}}return this}_handleBuffer(e,t,n){const s=typeof n==="number"?n:this._writeOffset;if(t){this.ensureInsertable(e.length,s)}else{this._ensureWriteable(e.length,s)}e.copy(this._buff,s);if(t){this._writeOffset+=e.length}else{if(typeof n==="number"){this._writeOffset=Math.max(this._writeOffset,s+e.length)}else{this._writeOffset+=e.length}}return this}ensureReadable(e,t){let n=this._readOffset;if(typeof t!=="undefined"){s.checkOffsetValue(t);n=t}if(n<0||n+e>this.length){throw new Error(s.ERRORS.INVALID_READ_BEYOND_BOUNDS)}}ensureInsertable(e,t){s.checkOffsetValue(t);this._ensureCapacity(this.length+e);if(t<this.length){this._buff.copy(this._buff,t+e,t,this._buff.length)}if(t+e>this.length){this.length=t+e}else{this.length+=e}}_ensureWriteable(e,t){const n=typeof t==="number"?t:this._writeOffset;this._ensureCapacity(n+e);if(n+e>this.length){this.length=n+e}}_ensureCapacity(e){const t=this._buff.length;if(e>t){let n=this._buff;let s=t*3/2+1;if(s<e){s=e}this._buff=Buffer.allocUnsafe(s);n.copy(this._buff,0,0,t)}}_readNumberValue(e,t,n){this.ensureReadable(t,n);const s=e.call(this._buff,typeof n==="number"?n:this._readOffset);if(typeof n==="undefined"){this._readOffset+=t}return s}_insertNumberValue(e,t,n,r){s.checkOffsetValue(r);this.ensureInsertable(t,r);e.call(this._buff,n,r);this._writeOffset+=t;return this}_writeNumberValue(e,t,n,r){if(typeof r==="number"){if(r<0){throw new Error(s.ERRORS.INVALID_WRITE_BEYOND_BOUNDS)}s.checkOffsetValue(r)}const o=typeof r==="number"?r:this._writeOffset;this._ensureWriteable(t,o);e.call(this._buff,n,o);if(typeof r==="number"){this._writeOffset=Math.max(this._writeOffset,o+t)}else{this._writeOffset+=t}return this}}t.SmartBuffer=SmartBuffer},496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const s=n(300);const r={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};t.ERRORS=r;function checkEncoding(e){if(!s.Buffer.isEncoding(e)){throw new Error(r.INVALID_ENCODING)}}t.checkEncoding=checkEncoding;function isFiniteInteger(e){return typeof e==="number"&&isFinite(e)&&isInteger(e)}t.isFiniteInteger=isFiniteInteger;function checkOffsetOrLengthValue(e,t){if(typeof e==="number"){if(!isFiniteInteger(e)||e<0){throw new Error(t?r.INVALID_OFFSET:r.INVALID_LENGTH)}}else{throw new Error(t?r.INVALID_OFFSET_NON_NUMBER:r.INVALID_LENGTH_NON_NUMBER)}}function checkLengthValue(e){checkOffsetOrLengthValue(e,false)}t.checkLengthValue=checkLengthValue;function checkOffsetValue(e){checkOffsetOrLengthValue(e,true)}t.checkOffsetValue=checkOffsetValue;function checkTargetOffset(e,t){if(e<0||e>t.length){throw new Error(r.INVALID_TARGET_OFFSET)}}t.checkTargetOffset=checkTargetOffset;function isInteger(e){return typeof e==="number"&&isFinite(e)&&Math.floor(e)===e}function bigIntAndBufferInt64Check(e){if(typeof BigInt==="undefined"){throw new Error("Platform does not support JS BigInt type.")}if(typeof s.Buffer.prototype[e]==="undefined"){throw new Error(`Platform does not support Buffer.prototype.${e}.`)}}t.bigIntAndBufferInt64Check=bigIntAndBufferInt64Check},878:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function fulfilled(e){try{step(s.next(e))}catch(e){r(e)}}function rejected(e){try{step(s["throw"](e))}catch(e){r(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())}))};var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});t.SocksProxyAgent=void 0;const o=n(651);const i=n(430);const a=r(n(234));const c=r(n(523));const u=r(n(404));const f=(0,a.default)("socks-proxy-agent");function parseSocksProxy(e){var t;let n=0;let s=false;let r=5;const o=e.hostname;if(o==null){throw new TypeError('No "host"')}if(typeof e.port==="number"){n=e.port}else if(typeof e.port==="string"){n=parseInt(e.port,10)}if(n==null){n=1080}if(e.protocol!=null){switch(e.protocol.replace(":","")){case"socks4":s=true;case"socks4a":r=4;break;case"socks5":s=true;case"socks":case"socks5h":r=5;break;default:throw new TypeError(`A "socks" protocol must be specified! Got: ${String(e.protocol)}`)}}if(typeof e.type!=="undefined"){if(e.type===4||e.type===5){r=e.type}else{throw new TypeError(`"type" must be 4 or 5, got: ${String(e.type)}`)}}const i={host:o,port:n,type:r};let a=(t=e.userId)!==null&&t!==void 0?t:e.username;let c=e.password;if(e.auth!=null){const t=e.auth.split(":");a=t[0];c=t[1]}if(a!=null){Object.defineProperty(i,"userId",{value:a,enumerable:false})}if(c!=null){Object.defineProperty(i,"password",{value:c,enumerable:false})}return{lookup:s,proxy:i}}const normalizeProxyOptions=e=>{let t;if(typeof e==="string"){t=new URL(e)}else{t=e}if(t==null){throw new TypeError("a SOCKS proxy server `host` and `port` must be specified!")}return t};class SocksProxyAgent extends i.Agent{constructor(e,t){var n;const s=normalizeProxyOptions(e);super(s);const r=parseSocksProxy(s);this.shouldLookup=r.lookup;this.proxy=r.proxy;this.tlsConnectionOptions=s.tls!=null?s.tls:{};this.timeout=(n=t===null||t===void 0?void 0:t.timeout)!==null&&n!==void 0?n:null}callback(e,t){var n;return s(this,void 0,void 0,(function*(){const{shouldLookup:s,proxy:r,timeout:i}=this;let{host:a,port:l,lookup:h}=t;if(a==null){throw new Error("No `host` defined!")}if(s){a=yield new Promise(((e,t)=>{const n=h!==null&&h!==void 0?h:c.default.lookup;n(a,{},((n,s)=>{if(n){t(n)}else{e(s)}}))}))}const d={proxy:r,destination:{host:a,port:l},command:"connect",timeout:i!==null&&i!==void 0?i:undefined};const cleanup=t=>{e.destroy();p.destroy();if(t)t.destroy()};f("Creating socks proxy connection: %o",d);const{socket:p}=yield o.SocksClient.createConnection(d);f("Successfully created socks proxy connection");if(i!==null){p.setTimeout(i);p.on("timeout",(()=>cleanup()))}if(t.secureEndpoint){f("Upgrading socket connection to TLS");const e=(n=t.servername)!==null&&n!==void 0?n:t.host;const s=u.default.connect(Object.assign(Object.assign(Object.assign({},omit(t,"host","hostname","path","port")),{socket:p,servername:e}),this.tlsConnectionOptions));s.once("error",(e=>{f("socket TLS error",e.message);cleanup(s)}));return s}return p}))}}t.SocksProxyAgent=SocksProxyAgent;function omit(e,...t){const n={};let s;for(s in e){if(!t.includes(s)){n[s]=e[s]}}return n}},650:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){function adopt(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,r){function fulfilled(e){try{step(s.next(e))}catch(e){r(e)}}function rejected(e){try{step(s["throw"](e))}catch(e){r(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:true});t.SocksClientError=t.SocksClient=void 0;const r=n(361);const o=n(808);const i=n(460);const a=n(75);const c=n(628);const u=n(833);const f=n(390);const l=n(453);Object.defineProperty(t,"SocksClientError",{enumerable:true,get:function(){return l.SocksClientError}});class SocksClient extends r.EventEmitter{constructor(e){super();this.options=Object.assign({},e);(0,u.validateSocksClientOptions)(e);this.setState(c.SocksClientState.Created)}static createConnection(e,t){return new Promise(((n,s)=>{try{(0,u.validateSocksClientOptions)(e,["connect"])}catch(e){if(typeof t==="function"){t(e);return n(e)}else{return s(e)}}const r=new SocksClient(e);r.connect(e.existing_socket);r.once("established",(e=>{r.removeAllListeners();if(typeof t==="function"){t(null,e);n(e)}else{n(e)}}));r.once("error",(e=>{r.removeAllListeners();if(typeof t==="function"){t(e);n(e)}else{s(e)}}))}))}static createConnectionChain(e,t){return new Promise(((n,r)=>s(this,void 0,void 0,(function*(){try{(0,u.validateSocksClientChainOptions)(e)}catch(e){if(typeof t==="function"){t(e);return n(e)}else{return r(e)}}let s;if(e.randomizeChain){(0,l.shuffleArray)(e.proxies)}try{for(let t=0;t<e.proxies.length;t++){const n=e.proxies[t];const r=t===e.proxies.length-1?e.destination:{host:e.proxies[t+1].host||e.proxies[t+1].ipaddress,port:e.proxies[t+1].port};const o=yield SocksClient.createConnection({command:"connect",proxy:n,destination:r});if(!s){s=o.socket}}if(typeof t==="function"){t(null,{socket:s});n({socket:s})}else{n({socket:s})}}catch(e){if(typeof t==="function"){t(e);n(e)}else{r(e)}}}))))}static createUDPFrame(e){const t=new a.SmartBuffer;t.writeUInt16BE(0);t.writeUInt8(e.frameNumber||0);if(o.isIPv4(e.remoteHost.host)){t.writeUInt8(c.Socks5HostType.IPv4);t.writeUInt32BE(i.toLong(e.remoteHost.host))}else if(o.isIPv6(e.remoteHost.host)){t.writeUInt8(c.Socks5HostType.IPv6);t.writeBuffer(i.toBuffer(e.remoteHost.host))}else{t.writeUInt8(c.Socks5HostType.Hostname);t.writeUInt8(Buffer.byteLength(e.remoteHost.host));t.writeString(e.remoteHost.host)}t.writeUInt16BE(e.remoteHost.port);t.writeBuffer(e.data);return t.toBuffer()}static parseUDPFrame(e){const t=a.SmartBuffer.fromBuffer(e);t.readOffset=2;const n=t.readUInt8();const s=t.readUInt8();let r;if(s===c.Socks5HostType.IPv4){r=i.fromLong(t.readUInt32BE())}else if(s===c.Socks5HostType.IPv6){r=i.toString(t.readBuffer(16))}else{r=t.readString(t.readUInt8())}const o=t.readUInt16BE();return{frameNumber:n,remoteHost:{host:r,port:o},data:t.readBuffer()}}setState(e){if(this.state!==c.SocksClientState.Error){this.state=e}}connect(e){this.onDataReceived=e=>this.onDataReceivedHandler(e);this.onClose=()=>this.onCloseHandler();this.onError=e=>this.onErrorHandler(e);this.onConnect=()=>this.onConnectHandler();const t=setTimeout((()=>this.onEstablishedTimeout()),this.options.timeout||c.DEFAULT_TIMEOUT);if(t.unref&&typeof t.unref==="function"){t.unref()}if(e){this.socket=e}else{this.socket=new o.Socket}this.socket.once("close",this.onClose);this.socket.once("error",this.onError);this.socket.once("connect",this.onConnect);this.socket.on("data",this.onDataReceived);this.setState(c.SocksClientState.Connecting);this.receiveBuffer=new f.ReceiveBuffer;if(e){this.socket.emit("connect")}else{this.socket.connect(this.getSocketOptions());if(this.options.set_tcp_nodelay!==undefined&&this.options.set_tcp_nodelay!==null){this.socket.setNoDelay(!!this.options.set_tcp_nodelay)}}this.prependOnceListener("established",(e=>{setImmediate((()=>{if(this.receiveBuffer.length>0){const t=this.receiveBuffer.get(this.receiveBuffer.length);e.socket.emit("data",t)}e.socket.resume()}))}))}getSocketOptions(){return Object.assign(Object.assign({},this.options.socket_options),{host:this.options.proxy.host||this.options.proxy.ipaddress,port:this.options.proxy.port})}onEstablishedTimeout(){if(this.state!==c.SocksClientState.Established&&this.state!==c.SocksClientState.BoundWaitingForConnection){this.closeSocket(c.ERRORS.ProxyConnectionTimedOut)}}onConnectHandler(){this.setState(c.SocksClientState.Connected);if(this.options.proxy.type===4){this.sendSocks4InitialHandshake()}else{this.sendSocks5InitialHandshake()}this.setState(c.SocksClientState.SentInitialHandshake)}onDataReceivedHandler(e){this.receiveBuffer.append(e);this.processData()}processData(){while(this.state!==c.SocksClientState.Established&&this.state!==c.SocksClientState.Error&&this.receiveBuffer.length>=this.nextRequiredPacketBufferSize){if(this.state===c.SocksClientState.SentInitialHandshake){if(this.options.proxy.type===4){this.handleSocks4FinalHandshakeResponse()}else{this.handleInitialSocks5HandshakeResponse()}}else if(this.state===c.SocksClientState.SentAuthentication){this.handleInitialSocks5AuthenticationHandshakeResponse()}else if(this.state===c.SocksClientState.SentFinalHandshake){this.handleSocks5FinalHandshakeResponse()}else if(this.state===c.SocksClientState.BoundWaitingForConnection){if(this.options.proxy.type===4){this.handleSocks4IncomingConnectionResponse()}else{this.handleSocks5IncomingConnectionResponse()}}else{this.closeSocket(c.ERRORS.InternalError);break}}}onCloseHandler(){this.closeSocket(c.ERRORS.SocketClosed)}onErrorHandler(e){this.closeSocket(e.message)}removeInternalSocketHandlers(){this.socket.pause();this.socket.removeListener("data",this.onDataReceived);this.socket.removeListener("close",this.onClose);this.socket.removeListener("error",this.onError);this.socket.removeListener("connect",this.onConnect)}closeSocket(e){if(this.state!==c.SocksClientState.Error){this.setState(c.SocksClientState.Error);this.socket.destroy();this.removeInternalSocketHandlers();this.emit("error",new l.SocksClientError(e,this.options))}}sendSocks4InitialHandshake(){const e=this.options.proxy.userId||"";const t=new a.SmartBuffer;t.writeUInt8(4);t.writeUInt8(c.SocksCommand[this.options.command]);t.writeUInt16BE(this.options.destination.port);if(o.isIPv4(this.options.destination.host)){t.writeBuffer(i.toBuffer(this.options.destination.host));t.writeStringNT(e)}else{t.writeUInt8(0);t.writeUInt8(0);t.writeUInt8(0);t.writeUInt8(1);t.writeStringNT(e);t.writeStringNT(this.options.destination.host)}this.nextRequiredPacketBufferSize=c.SOCKS_INCOMING_PACKET_SIZES.Socks4Response;this.socket.write(t.toBuffer())}handleSocks4FinalHandshakeResponse(){const e=this.receiveBuffer.get(8);if(e[1]!==c.Socks4Response.Granted){this.closeSocket(`${c.ERRORS.Socks4ProxyRejectedConnection} - (${c.Socks4Response[e[1]]})`)}else{if(c.SocksCommand[this.options.command]===c.SocksCommand.bind){const t=a.SmartBuffer.fromBuffer(e);t.readOffset=2;const n={port:t.readUInt16BE(),host:i.fromLong(t.readUInt32BE())};if(n.host==="0.0.0.0"){n.host=this.options.proxy.ipaddress}this.setState(c.SocksClientState.BoundWaitingForConnection);this.emit("bound",{remoteHost:n,socket:this.socket})}else{this.setState(c.SocksClientState.Established);this.removeInternalSocketHandlers();this.emit("established",{socket:this.socket})}}}handleSocks4IncomingConnectionResponse(){const e=this.receiveBuffer.get(8);if(e[1]!==c.Socks4Response.Granted){this.closeSocket(`${c.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${c.Socks4Response[e[1]]})`)}else{const t=a.SmartBuffer.fromBuffer(e);t.readOffset=2;const n={port:t.readUInt16BE(),host:i.fromLong(t.readUInt32BE())};this.setState(c.SocksClientState.Established);this.removeInternalSocketHandlers();this.emit("established",{remoteHost:n,socket:this.socket})}}sendSocks5InitialHandshake(){const e=new a.SmartBuffer;const t=[c.Socks5Auth.NoAuth];if(this.options.proxy.userId||this.options.proxy.password){t.push(c.Socks5Auth.UserPass)}if(this.options.proxy.custom_auth_method!==undefined){t.push(this.options.proxy.custom_auth_method)}e.writeUInt8(5);e.writeUInt8(t.length);for(const n of t){e.writeUInt8(n)}this.nextRequiredPacketBufferSize=c.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse;this.socket.write(e.toBuffer());this.setState(c.SocksClientState.SentInitialHandshake)}handleInitialSocks5HandshakeResponse(){const e=this.receiveBuffer.get(2);if(e[0]!==5){this.closeSocket(c.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion)}else if(e[1]===c.SOCKS5_NO_ACCEPTABLE_AUTH){this.closeSocket(c.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType)}else{if(e[1]===c.Socks5Auth.NoAuth){this.socks5ChosenAuthType=c.Socks5Auth.NoAuth;this.sendSocks5CommandRequest()}else if(e[1]===c.Socks5Auth.UserPass){this.socks5ChosenAuthType=c.Socks5Auth.UserPass;this.sendSocks5UserPassAuthentication()}else if(e[1]===this.options.proxy.custom_auth_method){this.socks5ChosenAuthType=this.options.proxy.custom_auth_method;this.sendSocks5CustomAuthentication()}else{this.closeSocket(c.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}}}sendSocks5UserPassAuthentication(){const e=this.options.proxy.userId||"";const t=this.options.proxy.password||"";const n=new a.SmartBuffer;n.writeUInt8(1);n.writeUInt8(Buffer.byteLength(e));n.writeString(e);n.writeUInt8(Buffer.byteLength(t));n.writeString(t);this.nextRequiredPacketBufferSize=c.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse;this.socket.write(n.toBuffer());this.setState(c.SocksClientState.SentAuthentication)}sendSocks5CustomAuthentication(){return s(this,void 0,void 0,(function*(){this.nextRequiredPacketBufferSize=this.options.proxy.custom_auth_response_size;this.socket.write(yield this.options.proxy.custom_auth_request_handler());this.setState(c.SocksClientState.SentAuthentication)}))}handleSocks5CustomAuthHandshakeResponse(e){return s(this,void 0,void 0,(function*(){return yield this.options.proxy.custom_auth_response_handler(e)}))}handleSocks5AuthenticationNoAuthHandshakeResponse(e){return s(this,void 0,void 0,(function*(){return e[1]===0}))}handleSocks5AuthenticationUserPassHandshakeResponse(e){return s(this,void 0,void 0,(function*(){return e[1]===0}))}handleInitialSocks5AuthenticationHandshakeResponse(){return s(this,void 0,void 0,(function*(){this.setState(c.SocksClientState.ReceivedAuthenticationResponse);let e=false;if(this.socks5ChosenAuthType===c.Socks5Auth.NoAuth){e=yield this.handleSocks5AuthenticationNoAuthHandshakeResponse(this.receiveBuffer.get(2))}else if(this.socks5ChosenAuthType===c.Socks5Auth.UserPass){e=yield this.handleSocks5AuthenticationUserPassHandshakeResponse(this.receiveBuffer.get(2))}else if(this.socks5ChosenAuthType===this.options.proxy.custom_auth_method){e=yield this.handleSocks5CustomAuthHandshakeResponse(this.receiveBuffer.get(this.options.proxy.custom_auth_response_size))}if(!e){this.closeSocket(c.ERRORS.Socks5AuthenticationFailed)}else{this.sendSocks5CommandRequest()}}))}sendSocks5CommandRequest(){const e=new a.SmartBuffer;e.writeUInt8(5);e.writeUInt8(c.SocksCommand[this.options.command]);e.writeUInt8(0);if(o.isIPv4(this.options.destination.host)){e.writeUInt8(c.Socks5HostType.IPv4);e.writeBuffer(i.toBuffer(this.options.destination.host))}else if(o.isIPv6(this.options.destination.host)){e.writeUInt8(c.Socks5HostType.IPv6);e.writeBuffer(i.toBuffer(this.options.destination.host))}else{e.writeUInt8(c.Socks5HostType.Hostname);e.writeUInt8(this.options.destination.host.length);e.writeString(this.options.destination.host)}e.writeUInt16BE(this.options.destination.port);this.nextRequiredPacketBufferSize=c.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader;this.socket.write(e.toBuffer());this.setState(c.SocksClientState.SentFinalHandshake)}handleSocks5FinalHandshakeResponse(){const e=this.receiveBuffer.peek(5);if(e[0]!==5||e[1]!==c.Socks5Response.Granted){this.closeSocket(`${c.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${c.Socks5Response[e[1]]}`)}else{const t=e[3];let n;let s;if(t===c.Socks5HostType.IPv4){const e=c.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<e){this.nextRequiredPacketBufferSize=e;return}s=a.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4));n={host:i.fromLong(s.readUInt32BE()),port:s.readUInt16BE()};if(n.host==="0.0.0.0"){n.host=this.options.proxy.ipaddress}}else if(t===c.Socks5HostType.Hostname){const t=e[4];const r=c.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(t);if(this.receiveBuffer.length<r){this.nextRequiredPacketBufferSize=r;return}s=a.SmartBuffer.fromBuffer(this.receiveBuffer.get(r).slice(5));n={host:s.readString(t),port:s.readUInt16BE()}}else if(t===c.Socks5HostType.IPv6){const e=c.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<e){this.nextRequiredPacketBufferSize=e;return}s=a.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4));n={host:i.toString(s.readBuffer(16)),port:s.readUInt16BE()}}this.setState(c.SocksClientState.ReceivedFinalResponse);if(c.SocksCommand[this.options.command]===c.SocksCommand.connect){this.setState(c.SocksClientState.Established);this.removeInternalSocketHandlers();this.emit("established",{remoteHost:n,socket:this.socket})}else if(c.SocksCommand[this.options.command]===c.SocksCommand.bind){this.setState(c.SocksClientState.BoundWaitingForConnection);this.nextRequiredPacketBufferSize=c.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader;this.emit("bound",{remoteHost:n,socket:this.socket})}else if(c.SocksCommand[this.options.command]===c.SocksCommand.associate){this.setState(c.SocksClientState.Established);this.removeInternalSocketHandlers();this.emit("established",{remoteHost:n,socket:this.socket})}}}handleSocks5IncomingConnectionResponse(){const e=this.receiveBuffer.peek(5);if(e[0]!==5||e[1]!==c.Socks5Response.Granted){this.closeSocket(`${c.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${c.Socks5Response[e[1]]}`)}else{const t=e[3];let n;let s;if(t===c.Socks5HostType.IPv4){const e=c.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<e){this.nextRequiredPacketBufferSize=e;return}s=a.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4));n={host:i.fromLong(s.readUInt32BE()),port:s.readUInt16BE()};if(n.host==="0.0.0.0"){n.host=this.options.proxy.ipaddress}}else if(t===c.Socks5HostType.Hostname){const t=e[4];const r=c.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(t);if(this.receiveBuffer.length<r){this.nextRequiredPacketBufferSize=r;return}s=a.SmartBuffer.fromBuffer(this.receiveBuffer.get(r).slice(5));n={host:s.readString(t),port:s.readUInt16BE()}}else if(t===c.Socks5HostType.IPv6){const e=c.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<e){this.nextRequiredPacketBufferSize=e;return}s=a.SmartBuffer.fromBuffer(this.receiveBuffer.get(e).slice(4));n={host:i.toString(s.readBuffer(16)),port:s.readUInt16BE()}}this.setState(c.SocksClientState.Established);this.removeInternalSocketHandlers();this.emit("established",{remoteHost:n,socket:this.socket})}}get socksClientOptions(){return Object.assign({},this.options)}}t.SocksClient=SocksClient},628:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.SOCKS5_NO_ACCEPTABLE_AUTH=t.SOCKS5_CUSTOM_AUTH_END=t.SOCKS5_CUSTOM_AUTH_START=t.SOCKS_INCOMING_PACKET_SIZES=t.SocksClientState=t.Socks5Response=t.Socks5HostType=t.Socks5Auth=t.Socks4Response=t.SocksCommand=t.ERRORS=t.DEFAULT_TIMEOUT=void 0;const n=3e4;t.DEFAULT_TIMEOUT=n;const s={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",InvalidSocksClientOptionsCustomAuthRange:"Custom auth must be a value between 0x80 and 0xFE.",InvalidSocksClientOptionsCustomAuthOptions:"When a custom_auth_method is provided, custom_auth_request_handler, custom_auth_response_size, and custom_auth_response_handler must also be provided and valid.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"};t.ERRORS=s;const r={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:e=>e+7,Socks4Response:8};t.SOCKS_INCOMING_PACKET_SIZES=r;var o;(function(e){e[e["connect"]=1]="connect";e[e["bind"]=2]="bind";e[e["associate"]=3]="associate"})(o||(o={}));t.SocksCommand=o;var i;(function(e){e[e["Granted"]=90]="Granted";e[e["Failed"]=91]="Failed";e[e["Rejected"]=92]="Rejected";e[e["RejectedIdent"]=93]="RejectedIdent"})(i||(i={}));t.Socks4Response=i;var a;(function(e){e[e["NoAuth"]=0]="NoAuth";e[e["GSSApi"]=1]="GSSApi";e[e["UserPass"]=2]="UserPass"})(a||(a={}));t.Socks5Auth=a;const c=128;t.SOCKS5_CUSTOM_AUTH_START=c;const u=254;t.SOCKS5_CUSTOM_AUTH_END=u;const f=255;t.SOCKS5_NO_ACCEPTABLE_AUTH=f;var l;(function(e){e[e["Granted"]=0]="Granted";e[e["Failure"]=1]="Failure";e[e["NotAllowed"]=2]="NotAllowed";e[e["NetworkUnreachable"]=3]="NetworkUnreachable";e[e["HostUnreachable"]=4]="HostUnreachable";e[e["ConnectionRefused"]=5]="ConnectionRefused";e[e["TTLExpired"]=6]="TTLExpired";e[e["CommandNotSupported"]=7]="CommandNotSupported";e[e["AddressNotSupported"]=8]="AddressNotSupported"})(l||(l={}));t.Socks5Response=l;var h;(function(e){e[e["IPv4"]=1]="IPv4";e[e["Hostname"]=3]="Hostname";e[e["IPv6"]=4]="IPv6"})(h||(h={}));t.Socks5HostType=h;var d;(function(e){e[e["Created"]=0]="Created";e[e["Connecting"]=1]="Connecting";e[e["Connected"]=2]="Connected";e[e["SentInitialHandshake"]=3]="SentInitialHandshake";e[e["ReceivedInitialHandshakeResponse"]=4]="ReceivedInitialHandshakeResponse";e[e["SentAuthentication"]=5]="SentAuthentication";e[e["ReceivedAuthenticationResponse"]=6]="ReceivedAuthenticationResponse";e[e["SentFinalHandshake"]=7]="SentFinalHandshake";e[e["ReceivedFinalResponse"]=8]="ReceivedFinalResponse";e[e["BoundWaitingForConnection"]=9]="BoundWaitingForConnection";e[e["Established"]=10]="Established";e[e["Disconnected"]=11]="Disconnected";e[e["Error"]=99]="Error"})(d||(d={}));t.SocksClientState=d},833:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.validateSocksClientChainOptions=t.validateSocksClientOptions=void 0;const s=n(453);const r=n(628);const o=n(781);function validateSocksClientOptions(e,t=["connect","bind","associate"]){if(!r.SocksCommand[e.command]){throw new s.SocksClientError(r.ERRORS.InvalidSocksCommand,e)}if(t.indexOf(e.command)===-1){throw new s.SocksClientError(r.ERRORS.InvalidSocksCommandForOperation,e)}if(!isValidSocksRemoteHost(e.destination)){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsDestination,e)}if(!isValidSocksProxy(e.proxy)){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsProxy,e)}validateCustomProxyAuth(e.proxy,e);if(e.timeout&&!isValidTimeoutValue(e.timeout)){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsTimeout,e)}if(e.existing_socket&&!(e.existing_socket instanceof o.Duplex)){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsExistingSocket,e)}}t.validateSocksClientOptions=validateSocksClientOptions;function validateSocksClientChainOptions(e){if(e.command!=="connect"){throw new s.SocksClientError(r.ERRORS.InvalidSocksCommandChain,e)}if(!isValidSocksRemoteHost(e.destination)){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsDestination,e)}if(!(e.proxies&&Array.isArray(e.proxies)&&e.proxies.length>=2)){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsProxiesLength,e)}e.proxies.forEach((t=>{if(!isValidSocksProxy(t)){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsProxy,e)}validateCustomProxyAuth(t,e)}));if(e.timeout&&!isValidTimeoutValue(e.timeout)){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsTimeout,e)}}t.validateSocksClientChainOptions=validateSocksClientChainOptions;function validateCustomProxyAuth(e,t){if(e.custom_auth_method!==undefined){if(e.custom_auth_method<r.SOCKS5_CUSTOM_AUTH_START||e.custom_auth_method>r.SOCKS5_CUSTOM_AUTH_END){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsCustomAuthRange,t)}if(e.custom_auth_request_handler===undefined||typeof e.custom_auth_request_handler!=="function"){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,t)}if(e.custom_auth_response_size===undefined){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,t)}if(e.custom_auth_response_handler===undefined||typeof e.custom_auth_response_handler!=="function"){throw new s.SocksClientError(r.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,t)}}}function isValidSocksRemoteHost(e){return e&&typeof e.host==="string"&&typeof e.port==="number"&&e.port>=0&&e.port<=65535}function isValidSocksProxy(e){return e&&(typeof e.host==="string"||typeof e.ipaddress==="string")&&typeof e.port==="number"&&e.port>=0&&e.port<=65535&&(e.type===4||e.type===5)}function isValidTimeoutValue(e){return typeof e==="number"&&e>0}},390:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.ReceiveBuffer=void 0;class ReceiveBuffer{constructor(e=4096){this.buffer=Buffer.allocUnsafe(e);this.offset=0;this.originalSize=e}get length(){return this.offset}append(e){if(!Buffer.isBuffer(e)){throw new Error("Attempted to append a non-buffer instance to ReceiveBuffer.")}if(this.offset+e.length>=this.buffer.length){const t=this.buffer;this.buffer=Buffer.allocUnsafe(Math.max(this.buffer.length+this.originalSize,this.buffer.length+e.length));t.copy(this.buffer)}e.copy(this.buffer,this.offset);return this.offset+=e.length}peek(e){if(e>this.offset){throw new Error("Attempted to read beyond the bounds of the managed internal data.")}return this.buffer.slice(0,e)}get(e){if(e>this.offset){throw new Error("Attempted to read beyond the bounds of the managed internal data.")}const t=Buffer.allocUnsafe(e);this.buffer.slice(0,e).copy(t);this.buffer.copyWithin(0,e,e+this.offset-e);this.offset-=e;return t}}t.ReceiveBuffer=ReceiveBuffer},453:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.shuffleArray=t.SocksClientError=void 0;class SocksClientError extends Error{constructor(e,t){super(e);this.options=t}}t.SocksClientError=SocksClientError;function shuffleArray(e){for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}t.shuffleArray=shuffleArray},651:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){if(s===undefined)s=n;var r=Object.getOwnPropertyDescriptor(t,n);if(!r||("get"in r?!t.__esModule:r.writable||r.configurable)){r={enumerable:true,get:function(){return t[n]}}}Object.defineProperty(e,s,r)}:function(e,t,n,s){if(s===undefined)s=n;e[s]=t[n]});var r=this&&this.__exportStar||function(e,t){for(var n in e)if(n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n))s(t,e,n)};Object.defineProperty(t,"__esModule",{value:true});r(n(650),t)},575:function(e,t,n){"use strict";const s=n(37);const r=n(224);const o=n(592);const{env:i}=process;let a;if(o("no-color")||o("no-colors")||o("color=false")||o("color=never")){a=0}else if(o("color")||o("colors")||o("color=true")||o("color=always")){a=1}if("FORCE_COLOR"in i){if(i.FORCE_COLOR==="true"){a=1}else if(i.FORCE_COLOR==="false"){a=0}else{a=i.FORCE_COLOR.length===0?1:Math.min(parseInt(i.FORCE_COLOR,10),3)}}function translateLevel(e){if(e===0){return false}return{level:e,hasBasic:true,has256:e>=2,has16m:e>=3}}function supportsColor(e,t){if(a===0){return 0}if(o("color=16m")||o("color=full")||o("color=truecolor")){return 3}if(o("color=256")){return 2}if(e&&!t&&a===undefined){return 0}const n=a||0;if(i.TERM==="dumb"){return n}if(process.platform==="win32"){const e=s.release().split(".");if(Number(e[0])>=10&&Number(e[2])>=10586){return Number(e[2])>=14931?3:2}return 1}if("CI"in i){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in i))||i.CI_NAME==="codeship"){return 1}return n}if("TEAMCITY_VERSION"in i){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0}if(i.COLORTERM==="truecolor"){return 3}if("TERM_PROGRAM"in i){const e=parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(i.TERM)){return 2}if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)){return 1}if("COLORTERM"in i){return 1}return n}function getSupportLevel(e){const t=supportsColor(e,e&&e.isTTY);return translateLevel(t)}e.exports={supportsColor:getSupportLevel,stdout:translateLevel(supportsColor(true,r.isatty(1))),stderr:translateLevel(supportsColor(true,r.isatty(2)))}},300:function(e){"use strict";e.exports=require("buffer")},523:function(e){"use strict";e.exports=require("dns")},361:function(e){"use strict";e.exports=require("events")},808:function(e){"use strict";e.exports=require("net")},37:function(e){"use strict";e.exports=require("os")},781:function(e){"use strict";e.exports=require("stream")},404:function(e){"use strict";e.exports=require("tls")},224:function(e){"use strict";e.exports=require("tty")},837:function(e){"use strict";e.exports=require("util")}};var t={};function __nccwpck_require__(n){var s=t[n];if(s!==undefined){return s.exports}var r=t[n]={exports:{}};var o=true;try{e[n].call(r.exports,r,r.exports,__nccwpck_require__);o=false}finally{if(o)delete t[n]}return r.exports}if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=__dirname+"/";var n=__nccwpck_require__(878);module.exports=n})();